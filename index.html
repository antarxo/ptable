<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>Δυναμικός Περιοδικός Πίνακας - Βήμα Βήμα</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f7f7f7;
      text-align: center;
    }
    #tableContainer {
      display: grid;
      gap: 2px;
      justify-content: center;
      margin: 20px auto;
    }
    .element {
      width: 50px;
      height: 50px;
      line-height: 50px;
      text-align: center;
      font-size: 14px;
      border: 1px solid #555;
      background-color: #ddd;
      cursor: pointer;
      user-select: none;
    }
    .s-block { background-color: #ffb3b3; }
    .p-block { background-color: #b3ffb3; }
    .d-block { background-color: #b3b3ff; }
    #electronConfig {
      max-width: 600px;
      margin: 20px auto;
      padding: 10px;
      border: 2px solid #333;
      background-color: #fff;
      text-align: left;
    }
    #nextElement {
      margin: 20px auto;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      display: block;
    }
  </style>
</head>
<body>
  <button id="nextElement">Επόμενο Στοιχείο</button>
  <div id="tableContainer"></div>
  <div id="electronConfig">Κάνε κλικ σε ένα στοιχείο για λεπτομέρειες</div>
  
  <script>
    // Δημιουργία στοιχείων από το 3 έως το 36.
    const elements = [];
    for (let n = 3; n <= 36; n++) {
      let category;
      // Παραδειγματικός ορισμός κατηγορίας (μπορείς να τον τροποποιήσεις όπως επιθυμείς)
      if (n === 3 || n === 4 || n === 11 || n === 12 || n === 19 || n === 20) {
         category = 's-block';
      } else if (n >= 21 && n <= 30) {
         category = 'd-block';
      } else {
         category = 'p-block';
      }
      elements.push({
         number: n,
         category: category,
         electronConfig: `1s² ... ${n}`
      });
    }
    
    const tableContainer = document.getElementById('tableContainer');
    const electronConfigDiv = document.getElementById('electronConfig');
    const nextButton = document.getElementById('nextElement');
    
    // Δημιουργούμε 3 γραμμές: row0, row1 και row2.
    let grid = [ [], [], [] ];
    let totalColumns = 0;       // Ο τρέχων συνολικός αριθμός στηλών
    let currentIndex = 0;       // Δείκτης του επόμενου στοιχείου (στο array elements)
    let insertionIndex = 2;     // Για τις φάσεις 4 και 5 (στοιχεία του row2)
    
    // Βοηθητική συνάρτηση: Εξασφαλίζει ότι η γραμμή έχει τουλάχιστον 'len' θέσεις
    function ensureRowLength(rowIndex, len) {
      while (grid[rowIndex].length < len) {
         grid[rowIndex].push(null);
      }
    }
    
    // Εισάγει νέα στήλη (δηλαδή ένα κελί null) σε κάθε γραμμή στο index 'colIndex'
    function insertColumnAt(colIndex) {
      for (let r = 0; r < grid.length; r++) {
         grid[r].splice(colIndex, 0, null);
      }
      totalColumns++;
    }
    
    // Δημιουργεί το κελί ενός στοιχείου με κλικ handler για την ηλεκτρονιακή διαμόρφωση
    function createCell(elObj) {
      const cell = document.createElement('div');
      cell.className = 'element ' + elObj.category;
      cell.textContent = elObj.number;
      cell.addEventListener('click', () => {
        electronConfigDiv.innerHTML = `<strong>Στοιχείο ${elObj.number}:</strong><br>${elObj.electronConfig}`;
      });
      return cell;
    }
    
    // Εμφανίζει το grid στον container
    function renderGrid() {
      tableContainer.innerHTML = '';
      tableContainer.style.gridTemplateColumns = `repeat(${totalColumns}, 50px)`;
      for (let r = 0; r < grid.length; r++) {
         for (let c = 0; c < totalColumns; c++) {
            let cell = grid[r][c];
            if (!cell) {
              // Δημιουργούμε ένα "κενό" κελί για διατήρηση της διάταξης
              cell = document.createElement('div');
              cell.className = 'element';
              cell.style.backgroundColor = '#fff';
            }
            tableContainer.appendChild(cell);
         }
      }
    }
    
    // Συνάρτηση που προσθέτει το επόμενο στοιχείο, ανάλογα με τη φάση
    function addElement() {
      // Έλεγχος αν έχουν τοποθετηθεί όλα τα στοιχεία
      if (currentIndex >= elements.length) {
         nextButton.disabled = true;
         return;
      }
      
      // **Phase 1:** Στοιχεία 3–10 (indices 0 έως 7) στη row0.
      if (currentIndex < 8) {
         const cell = createCell(elements[currentIndex]);
         grid[0].push(cell);
         totalColumns = grid[0].length; // Ενημέρωση συνολικών στηλών
         // Εξασφαλίζουμε ότι οι υπόλοιπες γραμμές έχουν τουλάχιστον τόσες στήλες
         ensureRowLength(1, totalColumns);
         ensureRowLength(2, totalColumns);
      }
      // **Phase 2:** Στοιχεία 11–18 (indices 8 έως 15) στη row1.
      else if (currentIndex < 16) {
         const pos = currentIndex - 8; // Θέση στη row1 (0 έως 7)
         const cell = createCell(elements[currentIndex]);
         ensureRowLength(1, totalColumns);
         grid[1][pos] = cell;
      }
      // **Phase 3:** Στοιχεία 19–20 (indices 16 έως 17) στη row2.
      else if (currentIndex < 18) {
         const pos = currentIndex - 16; // Θέσεις 0 ή 1
         const cell = createCell(elements[currentIndex]);
         ensureRowLength(2, totalColumns);
         grid[2][pos] = cell;
      }
      // **Phase 4:** Στοιχεία 21–30 (indices 18 έως 27) στη row2, με εισαγωγή νέας στήλης πριν από τοποθέτηση.
      else if (currentIndex < 28) {
         // Εισαγωγή νέας στήλης σε όλες τις γραμμές στο insertionIndex
         insertColumnAt(insertionIndex);
         const cell = createCell(elements[currentIndex]);
         grid[2][insertionIndex] = cell;
         insertionIndex++; // Μετατόπιση του δείκτη εισαγωγής για το επόμενο στοιχείο
      }
      // **Phase 5:** Στοιχεία 31–36 (indices 28 έως 33) στη row2 στα υπόλοιπα κενά κελιά.
      else if (currentIndex < 34) {
         const cell = createCell(elements[currentIndex]);
         grid[2][insertionIndex] = cell;
         insertionIndex++;
      }
      
      currentIndex++;
      renderGrid();
    }
    
    nextButton.addEventListener('click', addElement);
    
    // Αρχική εμφάνιση (κενό grid)
    renderGrid();
  </script>
</body>
</html>
