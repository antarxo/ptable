<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>Περιοδικός Πίνακας – Δική μου Λογική Βήμα Βήμα</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f7f7f7;
      text-align: center;
    }
    #tableContainer {
      margin: 20px auto;
      width: max-content;
    }
    .rowContainer {
      display: grid;
      gap: 2px;
      margin-bottom: 5px;
    }
    .element {
      width: 50px;
      height: 50px;
      line-height: 50px;
      text-align: center;
      font-size: 14px;
      border: 1px solid #555;
      background: #ddd;
      cursor: pointer;
      user-select: none;
    }
    .s-block { background: #ffb3b3; }
    .d-block { background: #b3b3ff; }
    .p-block { background: #b3ffb3; }
    .f-block { background: #ffd699; }
    #electronConfig {
      max-width: 600px;
      margin: 20px auto;
      padding: 10px;
      border: 2px solid #333;
      background: #fff;
      text-align: left;
    }
    #nextElement {
      margin: 20px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <button id="nextElement">Επόμενο Στοιχείο</button>
  <div id="tableContainer"></div>
  <div id="electronConfig">Κάντε κλικ σε ένα στοιχείο για λεπτομέρειες</div>
  
  <script>
    /* --- Ορισμός κατηγοριών βάσει του αριθμού --- */
    function getCategory(n) {
      if (n >= 3 && n <= 10) {
        return (n === 3 || n === 4) ? 's-block' : 'p-block';
      } else if (n >= 11 && n <= 18) {
        return (n === 11 || n === 12) ? 's-block' : 'p-block';
      } else if (n >= 19 && n <= 36) {
        if(n === 19 || n === 20) return 's-block';
        if(n >= 21 && n <= 30) return 'd-block';
        return 'p-block';
      } else if (n >= 37 && n <= 54) {
        if(n === 37 || n === 38) return 's-block';
        if(n >= 39 && n <= 48) return 'd-block';
        return 'p-block';
      } else if (n >= 55 && n <= 76) {
        if(n === 55 || n === 56) return 's-block';
        if(n >= 57 && n <= 70) return 'f-block';
        return 'p-block';
      } else if (n >= 77 && n <= 98) {
        if(n === 77 || n === 78) return 's-block';
        if(n >= 79 && n <= 92) return 'f-block';
        return 'p-block';
      }
      return 'p-block';
    }
    
    /* --- Δημιουργία κελιού στοιχείου --- */
    function createCell(elObj) {
      const cell = document.createElement('div');
      cell.className = 'element ' + elObj.category;
      cell.textContent = elObj.number;
      cell.addEventListener('click', () => {
        document.getElementById('electronConfig').innerHTML =
          `<strong>Στοιχείο ${elObj.number}:</strong><br>Διαμόρφωση: 1s² ... ${elObj.number}`;
      });
      return cell;
    }
    
    /* --- Ορισμός μοτίβων (patterns) για κάθε γραμμή --- */
    // Κάθε pattern είναι ένας πίνακας αντικειμένων: { count: number, shifting: boolean }
    const rowPatterns = [
      [ { count: 8, shifting: false } ],                           // Row 1: 8 fixed
      [ { count: 8, shifting: false } ],                           // Row 2: 8 fixed
      [ { count: 2, shifting: false }, { count: 10, shifting: true }, { count: 6, shifting: false } ], // Row 3
      [ { count: 2, shifting: false }, { count: 10, shifting: true }, { count: 6, shifting: false } ], // Row 4 (ίδιο με τη 3η)
      [ { count: 2, shifting: false }, { count: 14, shifting: true }, { count: 6, shifting: false } ], // Row 5
      [ { count: 2, shifting: false }, { count: 14, shifting: true }, { count: 6, shifting: false } ]  // Row 6
    ];
    
    // Δημιουργούμε τα δεδομένα για κάθε row:
    const rowsData = rowPatterns.map((pattern, idx) => ({
      pattern: pattern,           // ο πίνακας τμημάτων
      currentSegment: 0,          // δείκτης τρέχοντος τμήματος
      countInSegment: 0,          // πόσα στοιχεία έχουν τοποθετηθεί στο τρέχον τμήμα
      insertionIndex: 0,          // χρησιμοποιείται όταν το τμήμα απαιτεί shifting
      cells: []                   // ο πίνακας των κελιών για το row
    }));
    
    // Για κάθε row, αρχικά εάν το πρώτο τμήμα δεν είναι shifting, δεν χρειάζεται insertionIndex.
    // Αν το πρώτο τμήμα είναι fixed, insertionIndex δεν χρησιμοποιείται.
    
    // Ο συνολικός αριθμός στοιχείων που θα τοποθετηθούν ανά row (αθροίζοντας τα count):
    const rowTotals = rowPatterns.map(pattern => pattern.reduce((sum, seg) => sum + seg.count, 0));
    
    // Global δείκτης για τα στοιχεία (αριθμοί από 3 έως 98)
    const totalElements = rowTotals.reduce((a, b) => a + b, 0);
    let globalElementNumber = 3; // ξεκινάμε από 3
    let currentRowIndex = 0;     // ξεκινάμε από την πρώτη σειρά (index 0)
    
    // Δημιουργούμε έναν container για κάθε row μέσα στο #tableContainer
    const tableContainer = document.getElementById('tableContainer');
    function renderAllRows() {
      tableContainer.innerHTML = '';
      rowsData.forEach((rowData, idx) => {
        const rowDiv = document.createElement('div');
        rowDiv.className = 'rowContainer';
        // Ορίζουμε τον αριθμό στηλών ίσο με το πλήθος των κελιών (αν υπάρχουν)
        const cols = rowData.cells.length || rowTotals[idx];
        rowDiv.style.gridTemplateColumns = `repeat(${cols}, 50px)`;
        rowData.cells.forEach(cell => rowDiv.appendChild(cell));
        tableContainer.appendChild(rowDiv);
      });
    }
    
    // Συνάρτηση για προσθήκη του επόμενου στοιχείου στην τρέχουσα σειρά σύμφωνα με το μοτίβο
    function addElementToCurrentRow() {
      if (currentRowIndex >= rowsData.length) return; // όλα τελειώσαν
      
      const rowData = rowsData[currentRowIndex];
      const pattern = rowData.pattern;
      const seg = pattern[rowData.currentSegment];
      
      // Δημιουργούμε το στοιχείο με τον τρέχοντα global αριθμό
      const elObj = {
        number: globalElementNumber,
        category: getCategory(globalElementNumber)
      };
      const cell = createCell(elObj);
      
      if (seg.shifting) {
        // Αν είναι shifting, εισάγουμε το κελί στη θέση insertionIndex
        // (η θέση insertionIndex αρχικοποιείται στο τέλος του ήδη τοποθετημένου row)
        rowData.cells.splice(rowData.insertionIndex, 0, cell);
        rowData.insertionIndex++; // αυξάνουμε για την επόμενη εισαγωγή
      } else {
        // Fixed: απλή προσθήκη στο τέλος
        rowData.cells.push(cell);
        // Σε περίπτωση που μετά fixed τμήμα ξεκινά shifting, θέτουμε το insertionIndex ίσο με το πλήθος των ήδη τοποθετημένων κελιών.
        if (rowData.countInSegment + 1 === seg.count && (rowData.currentSegment + 1 < pattern.length) && pattern[rowData.currentSegment + 1].shifting) {
          // όταν τελειώνει το fixed τμήμα και το επόμενο είναι shifting, ορίζουμε το insertionIndex ως το τρέχον μήκος
          rowData.insertionIndex = rowData.cells.length;
        }
      }
      
      rowData.countInSegment++;
      globalElementNumber++;
      
      // Αν το τρέχον τμήμα έχει συμπληρωθεί, μεταβαίνουμε στο επόμενο τμήμα του row
      if (rowData.countInSegment === seg.count) {
        rowData.currentSegment++;
        rowData.countInSegment = 0;
        // Αν το νέο τμήμα απαιτεί shifting, θέτουμε την insertionIndex στο τέλος των ήδη τοποθετημένων κελιών
        if (rowData.currentSegment < pattern.length && pattern[rowData.currentSegment].shifting) {
          rowData.insertionIndex = rowData.cells.length;
        }
      }
      
      // Αν έχουμε συμπληρώσει όλα τα στοιχεία του τρέχοντος row, προχωράμε στο επόμενο row
      const totalForRow = rowTotals[currentRowIndex];
      if (rowData.cells.length === totalForRow) {
        currentRowIndex++;
      }
    }
    
    // Συνάρτηση που καλείται με το πάτημα του κουμπιού "Επόμενο Στοιχείο"
    function addNextElement() {
      if (globalElementNumber >= 3 + totalElements || currentRowIndex >= rowsData.length) {
        document.getElementById('nextElement').disabled = true;
        return;
      }
      addElementToCurrentRow();
      renderAllRows();
    }
    
    document.getElementById('nextElement').addEventListener('click', addNextElement);
    
    // Αρχική απόδοση
    renderAllRows();
  </script>
</body>
</html>
