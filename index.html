<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>Δυναμικός Περιοδικός Πίνακας</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', Arial, sans-serif;
      margin: 0;
      overflow: hidden;
      background: #f7f7f7;
    }
    #title {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 24px;
      font-weight: bold;
      z-index: 10;
    }
    #infoPanel {
      display: flex;
      justify-content: space-between;
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-width: 1200px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.95);
      border: 2px solid #333;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      z-index: 10;
    }
    .main-table {
      transition: transform 0.5s ease-in-out;
    }
    .collapsed .main-table {
      transform: translateX(-588px); /* 14 κελιά * 42px */
    }
    .f-block {
      transition: transform 0.5s ease-in-out;
    }
    .collapsed .f-block {
      transform: translateY(140px);
    }
    button {
      padding: 8px 16px;
      margin: 4px;
      cursor: pointer;
      border: 1px solid #333;
      background: #fff;
      border-radius: 4px;
    }
    button:hover {
      background: #333;
      color: #fff;
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>
<body>
  <div id="title">Δυναμική Δημιουργία Περιοδικού Πίνακα</div>
  <div id="infoPanel">
    <!-- Περιεχόμενο info panel όπως πριν -->
    <div id="leftPanel">
      <div id="elementInfo"></div>
      <div id="explanation"></div>
      <div id="subshells"></div>
      <div id="shells"></div>
      <div id="outerShell"></div>
    </div>
    <div id="rightPanel">
      <button id="nextElement">Επόμενο</button>
      <button id="togglePanel">Σύμπτυξε f-block</button>
      <button id="reset">Reset</button>
    </div>
  </div>

  <script>
    let elementsData = [];
    let isCollapsed = false;
    const CELL_SIZE = 42;
    const SHIFT_COLUMNS = 14;

    function preload() {
      loadJSON('elements.json', data => {
        elementsData = data.elements;
      }, () => console.error("Σφάλμα φόρτωσης JSON"));
    }

    function setup() {
      createCanvas(windowWidth, windowHeight).class('main-table');
      textFont('Roboto');
      textAlign(CENTER, CENTER);
      initializeTable();
      drawTable();
    }

    function initializeTable() {
      // Αρχικοποίηση πίνακα με βασικά στοιχεία
      // ... (προσαρμόστε με την αρχική σας υλοποίηση)
    }

    function draw() {
      background(247);
      drawMainTable();
      drawFBlock();
    }

    function drawMainTable() {
      push();
      if(isCollapsed) translate(-SHIFT_COLUMNS * CELL_SIZE, 0);
      
      // Σχεδίαση κύριου πίνακα
      let y = 80;
      for(let row = 0; row < 7; row++) {
        let x = 80;
        for(let col = 0; col < 18; col++) {
          if(col >= 17 && isCollapsed) continue;
          
          fill(getCellColor(row, col));
          rect(x, y, 40, 40, 5);
          fill(0);
          text(getElementNumber(row, col), x + 20, y + 20);
          x += CELL_SIZE;
        }
        y += 42;
      }
      pop();
    }

    function drawFBlock() {
      push();
      if(isCollapsed) translate(0, 140);
      
      // Σχεδίαση f-block
      let y = 80 + 6 * 42;
      for(let row = 7; row < 9; row++) {
        let x = 80 + 3 * CELL_SIZE;
        for(let col = 0; col < 14; col++) {
          fill('#ffe5cc');
          rect(x, y, 40, 40, 5);
          fill(0);
          text(getFBlockNumber(row, col), x + 20, y + 20);
          x += CELL_SIZE;
        }
        y += 42;
      }
      pop();
    }

    // Διαχείριση κουμπιών
    document.getElementById('togglePanel').addEventListener('click', () => {
      isCollapsed = !isCollapsed;
      document.body.classList.toggle('collapsed');
      document.getElementById('togglePanel').innerText = 
        isCollapsed ? 'Ανάπτυξε f-block' : 'Σύμπτυξε f-block';
      redraw();
    });

    // Βοηθητικές συναρτήσεις
    function getCellColor(row, col) {
      if(col < 2) return '#ff9999';
      if(col < 18-6) return '#ccccff';
      return '#ccffcc';
    }

    function getElementNumber(row, col) {
      // Λογική ανάκτησης αριθμού στοιχείου
      return row * 18 + col + 1;
    }

    function getFBlockNumber(row, col) {
      return row === 7 ? 57 + col : 89 + col;
    }

    function windowResized() {
      resizeCanvas(windowWidth, windowHeight);
      redraw();
    }
  </script>
</body>
</html>
