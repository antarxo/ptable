<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>Toggle Expanded/Collapsed</title>
  <!-- Φόρτωση της βιβλιοθήκης p5.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
</head>
<body>
  <!-- Κουμπί για την εναλλαγή μεταξύ expanded και collapsed -->
  <button id="toggleButton">Εμφάνιση expanded</button>

  <script>
    let positions;
    let showExpanded = true;  // αρχικά δείχνει expanded

    function preload() {
      // Φόρτωση του αρχείου JSON. Βεβαιώσου ότι το positions.json είναι στον ίδιο φάκελο.
      positions = loadJSON('positions.json');
    }

    function setup() {
      createCanvas(1400, 300);
      // Επιστροφή μηνύματος στο console για έλεγχο
      console.log("Expanded:", positions.expanded);
      console.log("Collapsed:", positions.collapsed);
      
      // Ορισμός listener στο κουμπί για εναλλαγή κατάστασης
      const btn = document.getElementById('toggleButton');
      btn.addEventListener('click', toggleState);
    }

    function draw() {
      background(240);
      // Εμφάνιση της κατάστασης ανάλογα με το showExpanded
      if (showExpanded) {
        drawPositions(positions.expanded, color(255, 0, 0));
      } else {
        // Σχεδιάζουμε collapsed χωρίς μετατόπιση ώστε να φαίνεται ξεχωριστά
        drawPositions(positions.collapsed, color(0, 0, 255));
      }
    }

    // Συνάρτηση για εναλλαγή κατάστασης
    function toggleState() {
      showExpanded = !showExpanded;
      // Ενημέρωση του κειμένου στο κουμπί
      const btn = document.getElementById('toggleButton');
      btn.textContent = showExpanded ? "Εμφάνιση expanded" : "Εμφάνιση collapsed";
    }

    // Συνάρτηση για την απεικόνιση των θέσεων κάθε ομάδας
    function drawPositions(data, fillColor) {
      for (let group in data) {
        let groupItems = data[group];
        for (let key in groupItems) {
          let pos = groupItems[key];
          fill(fillColor);
          stroke(0);
          rect(pos.x, pos.y, pos.width, pos.height);
          
          // Προαιρετικά: εμφάνιση του key πάνω στο ορθογώνιο
          fill(0);
          noStroke();
          textSize(10);
          text(key, pos.x + 2, pos.y + 12);
        }
      }
    }
  </script>
</body>
</html>
