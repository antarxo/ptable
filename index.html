<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>Απεικόνιση JSON - Expanded/Collapsed/Start</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <style>
    body { font-family: sans-serif; margin: 0; text-align: center; }
    #canvas-container { display: flex; justify-content: center; align-items: center; height: 80vh; }
    #controls { 
      position: fixed; 
      bottom: 0; 
      width: 100%; 
      background: white; 
      padding: 10px 0; 
      border-top: 2px solid #ccc;
    }
    button, input { margin: 5px; }
  </style>
</head>
<body>
  <div id="canvas-container"></div>

  <div id="controls">
    <button id="toggleButton">Εμφάνιση Expanded</button>
    <label>Left Offset: <span id="leftValue">18</span></label>
    <input type="range" id="leftSlider" min="-100" max="100" value="18">
    <label>Top Offset: <span id="topValue">57</span></label>
    <input type="range" id="topSlider" min="-100" max="100" value="57">
  </div>

  <script>
    let positions;
    let stateIndex = 0;
    let states = ["collapsed", "expanded", "start"];
    let leftSlider, topSlider;

    function preload() {
      positions = loadJSON('positions.json');
    }

    function setup() {
      let cnv = createCanvas(1400, 600);
      cnv.parent('canvas-container');
      leftSlider = select('#leftSlider');
      topSlider = select('#topSlider');
      leftSlider.input(updateSliderValues);
      topSlider.input(updateSliderValues);
      select('#toggleButton').mousePressed(toggleState);
    }

    function draw() {
      background(240);
      let offsetX = leftSlider.value();
      let offsetY = topSlider.value();
      
      push();
      translate(offsetX, offsetY);
      drawPositions(positions[states[stateIndex]], color(255, 0, 0));
      text(states[stateIndex], 10, 20);
      pop();
    }

    function updateSliderValues() {
      select('#leftValue').html(leftSlider.value());
      select('#topValue').html(topSlider.value());
    }

    function toggleState() {
      stateIndex = (stateIndex + 1) % states.length;
      select('#toggleButton').html("Εμφάνιση " + states[(stateIndex + 1) % states.length]);
    }

    function drawPositions(data, fillColor) {
      for (let key in data) {
        let pos = data[key];
        fill(fillColor);
        stroke(0);
        rect(pos.x, pos.y, pos.width, pos.height);
        fill(0);
        textSize(10);
        text(key, pos.x + 2, pos.y + 12);
      }
    }
  </script>
</body>
</html>
