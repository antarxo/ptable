<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>Δυναμικός Περιοδικός Πίνακας - Βήμα Βήμα (με f‑τομέα)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f7f7f7;
      text-align: center;
    }
    #tableContainer {
      display: grid;
      gap: 2px;
      justify-content: center;
      margin: 20px auto;
    }
    .element {
      width: 50px;
      height: 50px;
      line-height: 50px;
      text-align: center;
      font-size: 14px;
      border: 1px solid #555;
      background-color: #ddd;
      cursor: pointer;
      user-select: none;
    }
    /* Χρώματα για κάθε τομέα */
    .s-block { background-color: #ffb3b3; }
    .p-block { background-color: #b3ffb3; }
    .d-block { background-color: #b3b3ff; }
    .f-block { background-color: #ffd699; }
    #electronConfig {
      max-width: 600px;
      margin: 20px auto;
      padding: 10px;
      border: 2px solid #333;
      background-color: #fff;
      text-align: left;
    }
    #nextElement {
      margin: 20px auto;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      display: block;
    }
  </style>
</head>
<body>
  <button id="nextElement">Επόμενο Στοιχείο</button>
  <div id="tableContainer"></div>
  <div id="electronConfig">Κάνε κλικ σε ένα στοιχείο για λεπτομέρειες</div>
  
  <script>
    // Δημιουργούμε στοιχεία από το 3 έως το 50.
    const elements = [];
    for (let n = 3; n <= 50; n++) {
      let category;
      /* Ορισμός κατηγορίας:
         - s-block: 3, 4, 11, 12, 19, 20
         - d-block: 21–30
         - f-block: 37–50
         - p-block: τα υπόλοιπα (5–10, 13–18, 31–36)
      */
      if ([3, 4, 11, 12, 19, 20].includes(n)) {
         category = 's-block';
      } else if (n >= 21 && n <= 30) {
         category = 'd-block';
      } else if (n >= 37 && n <= 50) {
         category = 'f-block';
      } else {
         category = 'p-block';
      }
      elements.push({
         number: n,
         category: category,
         electronConfig: `1s² ... ${n}`
      });
    }
    
    const tableContainer = document.getElementById('tableContainer');
    const electronConfigDiv = document.getElementById('electronConfig');
    const nextButton = document.getElementById('nextElement');
    
    /* Το grid θα περιέχει τις σειρές του πίνακα.
       Αρχικά έχουμε 3 σειρές για τα στοιχεία s, d, p.
       Όταν ξεκινήσει ο f‑τομέας, προστίθεται νέα σειρά (row3).
    */
    let grid = [ [], [], [] ];
    let totalColumns = 0;      // Ο τρέχων συνολικός αριθμός στηλών
    let currentIndex = 0;      // Δείκτης του επόμενου στοιχείου στο array elements
    
    // Δείκτης εισαγωγής για τις μετατοπίσεις στη σειρά 2 (p‑τομέας)
    let dInsertionIndex = 2;
    // Για τη νέα σειρά του f‑τομέα (row3)
    let fInsertionIndex = null;
    
    // Βοηθητική συνάρτηση: Εξασφαλίζει ότι η σειρά grid[rowIndex] έχει τουλάχιστον 'len' θέσεις.
    function ensureRowLength(rowIndex, len) {
      while (grid[rowIndex].length < len) {
         grid[rowIndex].push(null);
      }
    }
    
    // Εισάγει νέα στήλη (κενό κελί) σε κάθε σειρά στο index colIndex.
    function insertColumnAt(colIndex) {
      for (let r = 0; r < grid.length; r++) {
         grid[r].splice(colIndex, 0, null);
      }
      totalColumns++;
    }
    
    // Δημιουργεί ένα κελί για ένα στοιχείο με click handler για την εμφάνιση της ηλεκτρονιακής διαμόρφωσης.
    function createCell(elObj) {
      const cell = document.createElement('div');
      cell.className = 'element ' + elObj.category;
      cell.textContent = elObj.number;
      cell.addEventListener('click', () => {
        electronConfigDiv.innerHTML = `<strong>Στοιχείο ${elObj.number}:</strong><br>${elObj.electronConfig}`;
      });
      return cell;
    }
    
    // Εμφανίζει το grid στον container.
    function renderGrid() {
      tableContainer.innerHTML = '';
      tableContainer.style.gridTemplateColumns = `repeat(${totalColumns}, 50px)`;
      for (let r = 0; r < grid.length; r++) {
         for (let c = 0; c < totalColumns; c++) {
            let cell = grid[r][c];
            if (!cell) {
              // Δημιουργούμε ένα "κενό" κελί για τη διατήρηση της διάταξης.
              cell = document.createElement('div');
              cell.className = 'element';
              cell.style.backgroundColor = '#fff';
            }
            tableContainer.appendChild(cell);
         }
      }
    }
    
    // Συνάρτηση που προσθέτει το επόμενο στοιχείο με βάση τη φάση.
    function addElement() {
      if (currentIndex >= elements.length) {
         nextButton.disabled = true;
         return;
      }
      
      /* ---------------------------
         PHASE 1: Row 0 – στοιχεία 3 έως 10 (8 στοιχεία)
      ---------------------------- */
      if (currentIndex < 8) {
         const cell = createCell(elements[currentIndex]);
         grid[0].push(cell);
         totalColumns = grid[0].length;
         // Διασφαλίζουμε ότι οι σειρές 1 και 2 έχουν τουλάχιστον τόσες στήλες.
         ensureRowLength(1, totalColumns);
         ensureRowLength(2, totalColumns);
      }
      /* ---------------------------
         PHASE 2: Row 1 – στοιχεία 11 έως 18 (indices 8–15)
      ---------------------------- */
      else if (currentIndex < 16) {
         const pos = currentIndex - 8; // θέσεις 0 έως 7
         const cell = createCell(elements[currentIndex]);
         ensureRowLength(1, totalColumns);
         grid[1][pos] = cell;
      }
      /* ---------------------------
         PHASE 3: Row 2 – τα 2 πρώτα στοιχεία (19, 20) (indices 16–17)
      ---------------------------- */
      else if (currentIndex < 18) {
         const pos = currentIndex - 16; // θέση 0 ή 1
         const cell = createCell(elements[currentIndex]);
         ensureRowLength(2, totalColumns);
         grid[2][pos] = cell;
      }
      /* ---------------------------
         PHASE 4: Row 2 – για στοιχεία 21 έως 30 (indices 18–27)
         Κάθε νέο στοιχείο απαιτεί εισαγωγή νέας στήλης (μετατόπιση προς τα δεξιά)
      ---------------------------- */
      else if (currentIndex < 28) {
         insertColumnAt(dInsertionIndex);
         const cell = createCell(elements[currentIndex]);
         grid[2][dInsertionIndex] = cell;
         dInsertionIndex++;
      }
      /* ---------------------------
         PHASE 5: Row 2 – συμπλήρωση κενών για στοιχεία 31 έως 36 (indices 28–33)
      ---------------------------- */
      else if (currentIndex < 34) {
         const cell = createCell(elements[currentIndex]);
         grid[2][dInsertionIndex] = cell;
         dInsertionIndex++;
      }
      /* ---------------------------
         PHASE 6: f‑τομέας – νέα σειρά (Row 3)
         Εφαρμόζεται η ίδια λογική (όπως για s, d, p):
           - Τα 2 πρώτα στοιχεία τοποθετούνται στα αριστερά.
           - Για κάθε επόμενο στοιχείο, πριν την τοποθέτηση γίνεται εισαγωγή νέας στήλης (με μετατόπιση προς τα δεξιά) σε όλες τις σειρές.
      ---------------------------- */
      else if (currentIndex < 48) {  // f‑block: 14 στοιχεία (αριθμοί 37 έως 50)
         // Όταν ξεκινά ο f‑τομέας, δημιουργούμε νέα σειρά (Row 3)
         if (currentIndex === 34) {
            grid.push(new Array(totalColumns).fill(null));
            fInsertionIndex = 2; // Ξεκινάμε από την 3η θέση, όπως και πριν
         }
         // Τα 2 πρώτα στοιχεία τοποθετούνται κανονικά στα κελιά 0 και 1.
         if (currentIndex < 34 + 2) {
            const pos = currentIndex - 34; // 0 ή 1
            grid[3][pos] = createCell(elements[currentIndex]);
         } else {
            // Για κάθε επόμενο στοιχείο, εισάγουμε νέα στήλη (όπως έγινε και στο phase 4)
            insertColumnAt(fInsertionIndex);
            grid[3][fInsertionIndex] = createCell(elements[currentIndex]);
            fInsertionIndex++;
         }
      }
      
      currentIndex++;
      renderGrid();
    }
    
    nextButton.addEventListener('click', addElement);
    
    // Αρχική απόδοση του grid (κενό)
    renderGrid();
  </script>
</body>
</html>
