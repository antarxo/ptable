<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>Πίνακας με 4 Καμβάδες - Ένας για κάθε τομέα</title>
  <!-- Χρήση της γραμματοσειράς Roboto από Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', Arial, sans-serif;
      margin: 0;
      overflow: hidden;
      background: #f7f7f7;
    }
    /* Πάνελ πληροφοριών και κουμπιά */
    #infoPanel {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      padding: 10px;
      background: rgba(255,255,255,0.95);
      border: 1px solid #333;
      z-index: 50;
    }
    #controls {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 50;
    }
    #controls button {
      margin: 0 5px;
      padding: 5px 10px;
    }
    /* Containers για τους 4 καμβάδες */
    /* Οι διαστάσεις ορίζονται ώστε να "καθίσουν" τα κελιά όπως περιγράφτηκαν */
    #canvasS {
      position: absolute;
      top: 100px;
      left: 20px;
      width: 124px;
      height: 336px;
      border: 1px solid #ccc;
      z-index: 10;
    }
    #canvasD {
      position: absolute;
      top: 100px;
      left: 160px;
      width: 418px;
      height: 336px;
      border: 1px solid #ccc;
      z-index: 10;
    }
    #canvasP {
      position: absolute;
      top: 100px;
      left: 600px;
      width: 250px;
      height: 336px;
      border: 1px solid #ccc;
      z-index: 10;
    }
    #canvasF {
      position: absolute;
      top: 450px;
      left: 20px;
      width: 586px;
      height: 336px;
      border: 1px solid #ccc;
      z-index: 10;
    }
  </style>
  <!-- Φόρτωση p5.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>
<body>
  <div id="infoPanel">Πληροφορίες στοιχείου...</div>
  <div id="controls">
    <button id="nextElement">Επόμενο</button>
    <button id="fillAll">Συμπλήρωσε</button>
    <button id="reset">Reset</button>
    <button id="toggleCollapsed">Εναλλαγή collapsed</button>
  </div>
  <!-- Containers για τους καμβάδες -->
  <div id="canvasS"></div>
  <div id="canvasD"></div>
  <div id="canvasP"></div>
  <div id="canvasF"></div>
  
  <script>
    // Για αυτό το παράδειγμα, θα δημιουργήσουμε dummy grids για κάθε τομέα.
    // Οι τιμές θα είναι αριθμημένες σειρές με τις διαστάσεις που καθορίσαμε.
    
    // Κοινές ρυθμίσεις για όλα τα blocks:
    const cellWidth = 40;
    const gap = 2;
    const numRows = 9;
    // Λειτουργία: collapsed (αν collapsed, εμφανίζεται μόνο ο s τομέας)
    let collapsed = false; // μπορείτε να το εναλλάσσετε μέσω του κουμπιού toggle
    
    // Υπολογισμός canvas height: 2 rows με ύψος 20 + 7 rows με ύψος 40 + (numRows-1)*gap
    const canvasHeight = 2 * 20 + 7 * 40 + (numRows - 1) * gap; // 40 + 280 + 8*2 = 40+280+16 = 336
    
    // Συναρτήσεις σχεδίασης grid με δεδομένα
    // drawGrid: δέχεται το p5 instance, αριθμό στηλών και ένα array δεδομένων με μήκος = columns * 9.
    // Για κάθε σειρά: αν row index < 2, cell height = 20, αλλιώς 40.
    function drawGrid(p, columns, dataArray) {
      p.background(240);
      let index = 0;
      let y = 0;
      for (let row = 0; row < numRows; row++) {
        let cellH = (row < 2) ? 20 : 40;
        let x = 0;
        for (let col = 0; col < columns; col++) {
          let cellData = dataArray[index] || { number: 0, symbol: "" };
          p.fill(200 + col*3, 200, 220);
          p.stroke(150);
          p.rect(x, y, cellWidth, cellH);
          p.fill(0);
          p.textSize(12);
          p.textAlign(p.CENTER, p.CENTER);
          p.text(cellData.symbol, x + cellWidth / 2, y + cellH / 2);
          index++;
          x += cellWidth + gap;
        }
        y += cellH + gap;
      }
    }
    
    // Dummy data generators για κάθε block
    function generateBlockData(columns, prefix) {
      const total = numRows * columns;
      let arr = [];
      for (let i = 0; i < total; i++) {
        arr.push({ number: i+1, symbol: prefix + (i+1) });
      }
      return arr;
    }
    
    let sData = generateBlockData(3, "S");
    let fData = generateBlockData(14, "F");
    let dData = generateBlockData(10, "D");
    let pData = generateBlockData(6, "P");
    
    // p5 sketches για κάθε τομέα:
    
    let sketchS = function(p) {
      p.setup = function() {
        p.createCanvas( 3 * cellWidth + 2 * gap, canvasHeight );
        p.noLoop();
      };
      p.draw = function() {
        // Σε collapsed mode, εμφανίζεται ο s block πάντα
        drawGrid(p, 3, sData);
      };
    };
    
    let sketchD = function(p) {
      p.setup = function() {
        p.createCanvas( 10 * cellWidth + 9 * gap, canvasHeight );
        p.noLoop();
      };
      p.draw = function() {
        // Εμφανίζουμε τον d block μόνο σε full mode, αλλιώς αν collapsed, κρύβουμε
        if (!collapsed) {
          drawGrid(p, 10, dData);
        } else {
          p.clear();
        }
      };
    };
    
    let sketchP = function(p) {
      p.setup = function() {
        p.createCanvas( 6 * cellWidth + 5 * gap, canvasHeight );
        p.noLoop();
      };
      p.draw = function() {
        if (!collapsed) {
          drawGrid(p, 6, pData);
        } else {
          p.clear();
        }
      };
    };
    
    let sketchF = function(p) {
      p.setup = function() {
        p.createCanvas( 14 * cellWidth + 13 * gap, canvasHeight );
        p.noLoop();
      };
      p.draw = function() {
        // Για τον f block μετατοπίζουμε τις σειρές προς τα κάτω (π.χ. + gap*?) αν collapsed, διαφορετικά εμφανίζεται κανονικά.
        if (!collapsed) {
          drawGrid(p, 14, fData);
        } else {
          // Σε collapsed mode, μετατοπίζουμε τον f block 42px προς τα κάτω (δηλαδή το ύψος της πρώτης σειράς collapsed)
          p.push();
          p.translate(0, 42); // μετατόπιση
          drawGrid(p, 14, fData);
          p.pop();
        }
      };
    };
    
    // Δημιουργία των 4 p5 instances στους αντίστοιχους καμβάδες
    new p5(sketchS, 'canvasS');
    new p5(sketchD, 'canvasD');
    new p5(sketchP, 'canvasP');
    new p5(sketchF, 'canvasF');
    
    // Κουμπιά ελέγχου για παράδειγμα
    document.getElementById('nextElement').addEventListener('click', function() {
      // Εδώ θα υλοποιήσετε τη λογική προσθήκης στοιχείων στον πίνακα
      alert("Next element (δεν έχει υλοποιηθεί πλήρως στο παράδειγμα)");
    });
    document.getElementById('fillAll').addEventListener('click', function() {
      alert("Fill all (δεν έχει υλοποιηθεί πλήρως στο παράδειγμα)");
    });
    document.getElementById('reset').addEventListener('click', function() {
      // Επαναφορά dummy δεδομένων
      sData = generateBlockData(3, "S");
      dData = generateBlockData(10, "D");
      pData = generateBlockData(6, "P");
      fData = generateBlockData(14, "F");
      window.location.reload(); // Απλό reset για το demo
    });
    document.getElementById('toggleCollapsed').addEventListener('click', function() {
      collapsed = !collapsed;
      // Ενημέρωση όλων των καμβάδων
      window.location.reload(); // Για το demo, κάνουμε reload για να αλλάξουν τα περιεχόμενα
    });
  </script>
</body>
</html>
